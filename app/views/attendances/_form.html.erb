<div class="panel panel-primary">
	<div class="panel-heading">
		<h3 class="panel-title">Record Attendance</h3>
	</div>
	<div class="panel-body">

		<%= form_for(@attendance) do |f| %>
		<% if @attendance.errors.any? %>
		<div id="error_explanation">
			<h2><%= pluralize(@attendance.errors.count, "error") %> prohibited this attendance from being saved:</h2>

			<ul>
				<% @attendance.errors.full_messages.each do |message| %>
				<li>
					<%= message %>
				</li>
				<% end %>
			</ul>
		</div>
		<% end %>
		<% @group = params[:group_id] %>
		<% @usersingroup = InGroup.where(groups_id: @group) %>
		<% @userarray = Array.new %>
		<% @usersingroup.each do |u| %>
		<% @us = User.find_by_id(u.users_id) %>
		<% @userarray << @us %>

		<% end %>

		<%= f.label "PT or LLAB?" %>
		<br>
		<%= f.select :event, options_for_select(["PT", "LLAB"]) %>
		<br>
		<%= f.label "Select absent users" %>
		<br>
		<%= f.hidden_field :groups_id, :value=>@group%>
		<%= select_tag(:user_ids, options_for_select(@userarray.collect {|u| [u.email, u.id]}),{:id=>"sel",:class => 'form-control',:placeholder=>"Select all absent users", :multiple => true, :name=>'project[user_ids][]'}) %>

		<div class="actions">
			<%= f.submit 'Submit', data: {confirm: 'Please review your selections hence your changes are permanent. Press cancel if you wish to make a change, otherwise press OK' } %>
		</div>
		<% end %>
	</div>
</div>
<script>
	$(document).ready(function() {
		$.getScript('//cdnjs.cloudflare.com/ajax/libs/select2/3.4.8/select2.min.js', function() {
			$.getScript('//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.3.0/js/bootstrap-datepicker.min.js', function() {
				$.getScript('//cdnjs.cloudflare.com/ajax/libs/moment.js/2.6.0/moment.min.js', function() {
					$.getScript('//cdnjs.cloudflare.com/ajax/libs/bootstrap-datetimepicker/3.0.0/js/bootstrap-datetimepicker.min.js', function() {
						$.getScript('//cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js', function() {
							$("#sel").select2({
								closeOnSelect : false
							});
						});
					});
					//script
				});
				//script
			});
			//script
		});
		//script
	});
	//script
</script>
